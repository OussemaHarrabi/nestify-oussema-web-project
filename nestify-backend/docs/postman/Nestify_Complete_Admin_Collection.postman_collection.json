{
	"info": {
		"_postman_id": "nestify-admin-complete-2025",
		"name": "Admin API Collection",
		"description": "Complete admin workflow with authentication and all admin endpoints - October 2025",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{admin_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://127.0.0.1:8000/api",
			"type": "string"
		},
		{
			"key": "admin_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "admin_email",
			"value": "admin@nestify.tn",
			"type": "string"
		},
		{
			"key": "admin_password",
			"value": "password",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "1. Authentication",
			"item": [
				{
					"name": "1.1 Admin Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Auto-save token to collection variable",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"admin_token\", jsonData.token);",
									"    console.log(\"âœ… Admin token saved:\", jsonData.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{admin_email}}\",\n    \"password\": \"{{admin_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						},
						"description": "Login as admin and automatically save the token"
					},
					"response": []
				},
				{
					"name": "1.2 Get Current User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/user",
							"host": ["{{base_url}}"],
							"path": ["user"]
						},
						"description": "Get authenticated admin user details"
					},
					"response": []
				},
				{
					"name": "1.3 Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/logout",
							"host": ["{{base_url}}"],
							"path": ["logout"]
						},
						"description": "Logout and invalidate token"
					},
					"response": []
				}
			],
			"description": "Admin authentication endpoints"
		},
		{
			"name": "2. Admin Dashboard",
			"item": [
				{
					"name": "2.1 Get Dashboard Stats",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/dashboard",
							"host": ["{{base_url}}"],
							"path": ["admin", "dashboard"]
						},
						"description": "Get admin dashboard statistics"
					},
					"response": []
				}
			],
			"description": "Admin dashboard endpoints"
		},
		{
			"name": "3. Promoter Management",
			"item": [
				{
					"name": "3.1 List All Promoters",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/promoters",
							"host": ["{{base_url}}"],
							"path": ["admin", "promoters"]
						},
						"description": "Get all promoters with pagination"
					},
					"response": []
				},
				{
					"name": "3.2 Get Promoter Details",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/promoters/7",
							"host": ["{{base_url}}"],
							"path": ["admin", "promoters", "7"]
						},
						"description": "Get specific promoter details by ID"
					},
					"response": []
				},
				{
					"name": "3.3 Verify Promoter",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"verified\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/promoters/7/verify",
							"host": ["{{base_url}}"],
							"path": ["admin", "promoters", "7", "verify"]
						},
						"description": "Verify or unverify a promoter"
					},
					"response": []
				}
			],
			"description": "Promoter management endpoints"
		},
		{
			"name": "4. Project Management",
			"item": [
				{
					"name": "4.1 List All Projects",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/projects",
							"host": ["{{base_url}}"],
							"path": ["admin", "projects"]
						},
						"description": "Get all projects with pagination"
					},
					"response": []
				},
				{
					"name": "4.2 List Pending Projects",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/projects?status=pending",
							"host": ["{{base_url}}"],
							"path": ["admin", "projects"],
							"query": [
								{
									"key": "status",
									"value": "pending"
								}
							]
						},
						"description": "Get projects pending publication"
					},
					"response": []
				},
				{
					"name": "4.3 Get Project Details",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/projects/5",
							"host": ["{{base_url}}"],
							"path": ["admin", "projects", "5"]
						},
						"description": "Get specific project details with promoter and properties"
					},
					"response": []
				},
				{
					"name": "4.4 Publish Project (Toggle)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{base_url}}/admin/projects/5/publish",
							"host": ["{{base_url}}"],
							"path": ["admin", "projects", "5", "publish"]
						},
						"description": "Toggle project publication status (no body required)"
					},
					"response": []
				},
				{
					"name": "4.5 Publish Project (Explicit)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"is_published\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/projects/5/publish",
							"host": ["{{base_url}}"],
							"path": ["admin", "projects", "5", "publish"]
						},
						"description": "Explicitly set project publication status"
					},
					"response": []
				},
				{
					"name": "4.6 Unpublish Project",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/projects/5/unpublish",
							"host": ["{{base_url}}"],
							"path": ["admin", "projects", "5", "unpublish"]
						},
						"description": "Unpublish a project"
					},
					"response": []
				}
			],
			"description": "Project management endpoints"
		},
		{
			"name": "5. Property Management",
			"item": [
				{
					"name": "5.1 List All Properties",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/admin/properties",
							"host": ["{{base_url}}"],
							"path": ["admin", "properties"]
						},
						"description": "Get all properties with pagination"
					},
					"response": []
				},
				{
					"name": "5.2 Validate Property",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"validated\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/properties/1/validate",
							"host": ["{{base_url}}"],
							"path": ["admin", "properties", "1", "validate"]
						},
						"description": "Validate or invalidate a property"
					},
					"response": []
				}
			],
			"description": "Property management endpoints"
		},
		{
			"name": "6. Public Endpoints (For Testing)",
			"item": [
				{
					"name": "6.1 List Public Projects",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/projects",
							"host": ["{{base_url}}"],
							"path": ["projects"]
						},
						"description": "Get published projects (no auth required)"
					},
					"response": []
				},
				{
					"name": "6.2 Get Project by ID",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/projects/5",
							"host": ["{{base_url}}"],
							"path": ["projects", "5"]
						},
						"description": "Get published project by ID (no auth required)"
					},
					"response": []
				},
				{
					"name": "6.3 Search Projects",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/search?query=tunis",
							"host": ["{{base_url}}"],
							"path": ["search"],
							"query": [
								{
									"key": "query",
									"value": "tunis"
								}
							]
						},
						"description": "Search projects (no auth required)"
					},
					"response": []
				}
			],
			"description": "Public endpoints for testing project visibility"
		}
	]
}
